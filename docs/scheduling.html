<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar Chart</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .calendar-container {
            position: relative;
            margin-bottom: 20px;
        }
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            grid-auto-rows: minmax(25px, auto);
            gap: 1px;
            background-color: #444;
            transform: scale(0.65); /* Increase the chart size by 30% */
            transform-origin: top left;
        }
        .calendar .header {
            background-color: #333;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            font-weight: bold;
            border: 1px solid #222;
        }
        .calendar .cell {
            background-color: #fff;
            color: #000;
            text-align: center;
            padding: 5px 0;
            cursor: pointer;
            border: 1px solid #ccc;
            user-select: none; /* Prevent text highlighting */
        }
        .calendar .cell:hover {
            background-color: #ccc;
        }
        .calendar .cell.active {
            background-color: #add8e6; /* Light blue background for active cells */
        }
        #get-active-cells {
            margin: 20px auto; /* Center the button and add some margin */
        }
    </style>
</head>
<body>
    <div class="calendar-container">
        <div class="calendar">
            <div class="header">Sunday</div>
            <div class="header">Monday</div>
            <div class="header">Tuesday</div>
            <div class="header">Wednesday</div>
            <div class="header">Thursday</div>
            <div class="header">Friday</div>
            <div class="header">Saturday</div>
        </div>
    </div>
    <button id="get-active-cells">Get Active Cells</button>

    <script>
        const calendar = document.querySelector('.calendar');

        // Days of the week for data-day attribute
        const daysOfWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];

        // Initialize the nested array to track active cells
        const activeCells = Array.from({ length: 7 }, () => []);

        let isMouseDown = false;

        // Function to handle toggling cell active state
        function toggleCellActive(cell) {
            // Get day and hour
            const day = cell.getAttribute('data-day');
            const hour = cell.getAttribute('data-hour');
            const dayIndex = daysOfWeek.indexOf(day);

            // Toggle the 'active' class to light up the cell
            cell.classList.toggle('active');

            // Update the nested array based on the active state
            if (cell.classList.contains('active')) {
                activeCells[dayIndex].push(hour);
            } else {
                activeCells[dayIndex] = activeCells[dayIndex].filter(h => h !== hour);
            }

            // Sort times from earliest to latest
            activeCells[dayIndex].sort((a, b) => {
                const [startA] = a.split(':');
                const [startB] = b.split(':');
                return Number(startA[0]) - Number(startB[0]);
            });
        }

        // Loop through 24 hours and 7 days to create cells
        for (let hour = 0; hour < 24; hour++) {
            for (let day = 0; day < 7; day++) {
                const cell = document.createElement('div');
                cell.classList.add('cell', 'clickable');
                cell.setAttribute('data-day', daysOfWeek[day]);
                cell.setAttribute('data-hour', `${hour}:00-${hour + 1}:00`);
                cell.textContent = `${hour}:00-${hour + 1}:00`;
                calendar.appendChild(cell);

                // Add event listener to handle click event
                cell.addEventListener('mousedown', function() {
                    isMouseDown = true;
                    toggleCellActive(this);
                });

                cell.addEventListener('mouseover', function() {
                    if (isMouseDown) {
                        toggleCellActive(this);
                    }
                });
            }
        }

        // Add event listeners to handle mouse up event
        document.addEventListener('mouseup', function() {
            isMouseDown = false;
        });

        // Function to get the nested array of active cells
        function getActiveCells() {
            return activeCells;
        }

        // Add event listener to the button to log the active cells
        document.getElementById('get-active-cells').addEventListener('click', function() {
            console.log(getActiveCells());
        });
    </script>
</body>
</html>
